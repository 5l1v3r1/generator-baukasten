{#
  Neuigkeiten Template
  ====================
#}

{# -- Macros -- #}
{% import '_macros/_macro-pagination.html' as macroPagination %}

{% extends "_layouts/_master.html" %}
{% set bodyClass = "p-news" %}
{% set seomaticMeta = seomaticMeta | merge({'seoTitle': 'Category: ' ~ category }) %}

{# Set Query #}
{% set data = craft.entries({
  section: 'news',
  relatedTo: craft.categories.slug(category.slug),
  limit: 12
}) %}


{% paginate data as pageInfo, pageEntries %}

{# start: Rel Nav #}
{% block siteHeader %}
  {% set vars = {
  pageInfo: pageInfo
  } %}
  {% include '_partials/header/_siteHeaderLinks.html' with vars %}
{% endblock %}


{% block appContent %}
  {# -- Cache -- #}
  {% cache globally using key category.group().handle ~ category ~ craft.request.path ~ (craft.request.getPageNum ? '/p' ~ craft.request.getPageNum : '') %}
  <div class="o-section">
    <div class="o-row">

      {# -- Include Page Title -- #}
      {% include '_modules/pageTitle/_template.html' with {
        options: {
          object: category,
          size: 'h1'
        }
      } %}
    </div>
  </div>

  <div class="m-news">
    {% for entry in pageEntries %}
      {# Include Referenz #}
      {#{% include '_modules/newsSingle/_template.html' %}#}
    {% endfor %}
  </div>

  {# Pagination #}
  {{ macroPagination.pagination(pageInfo,craft) }}

  {# -- Cache End -- #}
  {% endcache %}
{% endblock %}
